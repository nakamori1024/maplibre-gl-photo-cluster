<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>maplibre-gl-photo-cluster</title>
    <link rel='stylesheet' href='https://unpkg.com/maplibre-gl@3.2.0/dist/maplibre-gl.css' />
    <script src='https://unpkg.com/maplibre-gl@3.2.0/dist/maplibre-gl.js'></script>
    <style>
        body { margin: 0; padding: 0; }
        #map { position: absolute; top: 0; bottom: 0; width: 100%; }
    </style>
</head>
<body>
    <div id="map"></div>

    <script type="module">
        import { PhotoPoint, PhotoCluster, PhotoExtension } from '../src/maplibre-gl-photo-cluster.js';

        const map = new maplibregl.Map({
            container: 'map',
            style: 'https://tile.openstreetmap.jp/styles/osm-bright-ja/style.json',
            center: [139.767, 35.681],
            zoom: 12
        });

        // Add extention
        new PhotoExtension(map);

        // Create photo points
        const photo1 = new PhotoPoint([139.767, 35.681], 'https://blogger.googleusercontent.com/img/b/R29vZ2xl/AVvXsEgB9EsoenaBaa5b4kru40xO-ERPTtxK1MuJO_8moHTTGy-6DpNxzac9yv4RBL1Zl2qo2CM4spoAEOae1taEVdClUSUzd_C44eYB6HXeb9dYsh46CI3TT2xXrGIhf8Y7zhJnuh_1LVJJTd1v/s719/food_udon_goboten.png');
        const photo2 = new PhotoPoint([139.7000, 35.6900],'https://blogger.googleusercontent.com/img/b/R29vZ2xl/AVvXsEiAyMmXKQvsPMPVck5FilUJbsAvI9JskLGyTpicw2QG2RK-cAkBBgy4RfIVSh-anB33qYcRLsRfPNiGUYEmSnShnvxlEoqPIleR8nS0tSD8H1kjNvYSfwKMbU_Yj54IHZj73OeiFnrSNOwP/s614/food_kakuni_manju.png');

        // Add properties
        photo1.addProperties("caption", "ごぼ天うどん");
        photo2.addProperties("caption", "角煮まんじゅう");

        // Create photo cluster
        const photos = new PhotoCluster();
        photos.addPhoto(photo1);
        photos.addPhoto(photo2);
        photos.addPhoto(new PhotoPoint([139.73552611255565, 35.68161683609172], "https://blogger.googleusercontent.com/img/b/R29vZ2xl/AVvXsEjg2n_lx_JUue8gmooJLdEjd-a-s5MFxzuyp42hzGMyU2Pa9ufjZLWqOqhWIbvdfTxWgOsTZMRjzofF2wtWpNRuE0dtI1mi70_Igu8gkXAEgRsqXUA342cJZOTUNpEchhdkPJKaW3zYmjFo/s755/food_ra-men_pa-ko-men.png"));

        // Add photo cluster
        map.addPhotoCluster({
            source: photos, // PhotoCluster object
            shape: "square", // square or circle
            popup: true, // true or false
            clickFunction: testFunction // function for click event
        });

        // Example function
        function testFunction() {
            console.log("test");
        }
    </script>
</body>
</html>